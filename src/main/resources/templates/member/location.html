<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Neighborhood Verification" />
    <meta name="author" content="Gunpo Community" />
    <title>ë™ë„¤ ì¸ì¦ - Gunpo Community</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/css/styles.css" rel="stylesheet" />
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8f9fa;
        }

        #wrapper {
            display: flex;
            height: 100vh;
        }

        #sidebar-wrapper {
            width: 250px;
            background: linear-gradient(135deg, #6c63ff, #c197ff);
            color: white;
        }

        .sidebar-heading {
            text-align: center;
            font-weight: bold;
            font-size: 1.5rem;
            padding: 15px 0;
            background: #5a54d2;
        }

        .list-group-item {
            background-color: transparent;
            color: white;
        }

        .list-group-item:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        #page-content-wrapper {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .navbar {
            background-color: #ffffff;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }

        .navbar .navbar-brand {
            display: flex;
            align-items: center;
            font-weight: bold;
        }

        .navbar .navbar-brand .icon {
            font-size: 1.5rem;
            margin-right: 5px;
        }

        .container-fluid h1 {
            font-size: 2.5rem;
            color: #5a54d2;
            font-weight: bold;
        }

        .container-fluid p {
            font-size: 1.2rem;
            color: #333333;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6c63ff, #c197ff);
            border: none;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
            font-size: 1.2rem;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #5a54d2, #a67bff);
        }
    </style>
</head>
<body>
<div class="d-flex" id="wrapper">
    <!-- Sidebar-->
    <div class="border-end bg-white" id="sidebar-wrapper">
        <div class="sidebar-heading">Gunpo Community</div>
        <div class="list-group list-group-flush">
            <a class="list-group-item list-group-item-action" href="#!">ê³µì§€ì‚¬í•­</a>
            <a class="list-group-item list-group-item-action" href="/chat">ì‹¤ì‹œê°„ ì±„íŒ…</a>
            <a class="list-group-item list-group-item-action" href="/GyeonggiCurrencyStore">ê²½ê¸° ì§€ì—­í™”í ê°€ë§¹ì  ì°¾ê¸°</a>
            <a class="list-group-item list-group-item-action" href="/board/list">ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ</a>
            <a class="list-group-item list-group-item-action" href="/smoking-area">í¡ì—° êµ¬ì—­</a>
            <a class="list-group-item list-group-item-action" href="/news">ë‰´ìŠ¤</a>
        </div>
    </div>
    <!-- Page content wrapper-->
    <div id="page-content-wrapper">
        <!-- Top navigation-->
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a class="navbar-brand" href="/">
                    <span class="icon">ğŸ </span>
                    <span class="text">í™ˆìœ¼ë¡œ</span>
                </a>
            </div>
        </nav>
        <!-- Page content-->
        <div class="container-fluid text-center">
            <h1 class="mt-4">ë™ë„¤ ì¸ì¦</h1>
            <p>í˜„ì¬ ìœ„ì¹˜ë¥¼ ì¸ì¦í•˜ì—¬ <strong>êµ°í¬ ì»¤ë®¤ë‹ˆí‹°</strong>ë¥¼ ì´ìš©í•˜ì„¸ìš”!</p>
            <button class="btn btn-primary mt-3" onclick="getLocation()">ë‚´ ìœ„ì¹˜ë¡œ ì¸ì¦í•˜ê¸°</button>
        </div>
    </div>
</div>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(sendPosition, showError);
        } else {
            alert("ì´ ë¸Œë¼ìš°ì €ëŠ” Geolocationì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

    function sendPosition(position) {
        const data = {
            latitude: position.coords.latitude,
            longitude: position.coords.longitude
        };

        console.log("ìœ„ë„:", data.latitude);
        console.log("ê²½ë„:", data.longitude);

        fetch('/api/neighborhoodVerify', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("ë™ë„¤ ì¸ì¦ ì„±ê³µ!");
                    window.location.href = "/board/list"; // ì„±ê³µ ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                } else {
                    alert("ë™ë„¤ ì¸ì¦ ì‹¤íŒ¨. ìœ„ì¹˜ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.");
                }
            })
            .catch(error => {
                console.error("ë™ë„¤ ì¸ì¦ ì¤‘ ì˜¤ë¥˜:", error);
                alert("ë™ë„¤ ì¸ì¦ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            });
    }

    function showError(error) {
        switch (error.code) {
            case error.PERMISSION_DENIED:
                alert("ì‚¬ìš©ìê°€ ìœ„ì¹˜ ì•¡ì„¸ìŠ¤ë¥¼ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤.");
                break;
            case error.POSITION_UNAVAILABLE:
                alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                break;
            case error.TIMEOUT:
                alert("ìš”ì²­ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.");
                break;
            case error.UNKNOWN_ERROR:
                alert("ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                break;
        }
    }
</script>
</body>
</html>
